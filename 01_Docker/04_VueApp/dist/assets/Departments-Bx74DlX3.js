import{o as c,c as i,a as e,F as y,r as f,t as d,w as m,n as k,b as h,u as $,d as q,e as x,f as C,g as P}from"./index-Db6Y44QE.js";import{a as N}from"./index-BwlZPFVB.js";const w={class:"table table-striped table-hover text-center"},D=e("thead",null,[e("tr",null,[e("th",null,"학과 번호"),e("th",null,"학과 이름"),e("th",null,"계열"),e("th",null,"개설 여부"),e("th",null,"정원"),e("th",null,"삭제")])],-1),I=e("td",null,[e("button",{type:"button",class:"btn btn-outline-danger"},"삭제")],-1),L={__name:"DepartmentList",props:{departments:{type:Array,required:!0}},setup(r){return(g,l)=>(c(),i("div",null,[e("table",w,[D,e("tbody",null,[(c(!0),i(y,null,f(r.departments,a=>(c(),i("tr",{key:a.no},[e("td",null,d(a.no),1),e("td",null,d(a.name),1),e("td",null,d(a.category),1),e("td",null,d(a.openYn),1),e("td",null,d(a.capacity),1),I]))),128))])])]))}},R={"aria-label":"Page navigation example"},B={class:"pagination justify-content-center"},M={class:"page-item"},F=e("span",{"aria-hidden":"true"},"«",-1),S=[F],V=["onClick"],j={class:"page-item"},z=e("span",{"aria-hidden":"true"},"»",-1),A=[z],E={__name:"PageNation",props:{currentPage:{type:Number,required:!0},startPage:{type:Number,required:!0},endPage:{type:Number,required:!0}},emits:["change-page"],setup(r,{emit:g}){const l=g,a=(u,n)=>{let t=[];for(let s=u;s<=n;s++)t.push(s);return t};return(u,n)=>(c(),i("div",null,[e("nav",R,[e("ul",B,[e("li",M,[e("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:n[0]||(n[0]=m(t=>l("change-page",r.currentPage-1),["prevent"]))},S)]),(c(!0),i(y,null,f(a(r.startPage,r.endPage),t=>(c(),i("li",{key:t,class:"page-item"},[e("a",{class:k(["page-link",{active:r.currentPage===t}]),href:"#",onClick:m(s=>l("change-page",t),["prevent"])},d(t),11,V)]))),128)),e("li",j,[e("a",{class:"page-link",href:"#","aria-label":"Next",onClick:n[1]||(n[1]=m(t=>l("change-page",r.currentPage+1),["prevent"]))},A)])])])]))}},O=e("h2",null,"학과 목록 조회",-1),_=5,Y=10,J={__name:"Departments",setup(r){const g=h([]),l=$(),a=q(),u=h(parseInt(l.query.page)||1),n=h(0),t=h(0),s=h(0),v=async o=>{try{const p=await N.get(`/departments?page=${o}&numOfRows=10`);g.value=p.data.result,s.value=parseInt(Math.ceil(p.data.totalCount/Y)),n.value=_*parseInt((o-1)/_)+1,t.value=n.value+_-1,t.value=t.value>s.value?s.value:t.value}catch(p){console.log(p)}},b=o=>{o>=1&&o<=s.value&&a.push({name:"departments",query:{page:o}})};return x(()=>{v(u.value)}),C(l,()=>{u.value=parseInt(l.query.page)||1,v(u.value)}),(o,p)=>(c(),i("div",null,[O,P(L,{departments:g.value},null,8,["departments"]),P(E,{currentPage:u.value,startPage:n.value,endPage:t.value,onChangePage:b},null,8,["currentPage","startPage","endPage"])]))}};export{J as default};
